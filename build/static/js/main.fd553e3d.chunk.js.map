{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/FilterPerson.js","services/phones.js","components/Notification.js","App.js","index.js"],"names":["Person","name","phone","deletePhoneNumber","onClick","Persons","people","console","log","map","person","key","number","id","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handlePersonChange","newNumber","handleNumberChange","type","FilterPerson","search","handler","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","personsToShow","useState","persons","setPersons","setNewName","setnewNumber","setSearch","notificationMessage","setnotificationMessage","notificationtype","setnotificationtype","useEffect","phoneService","initialPeople","filter","toUpperCase","includes","event","target","preventDefault","PersonObject","e","length","window","confirm","find","n","changePerson","returnedPerson","setTimeout","catch","error","concat","note","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd553e3d.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Person = ({ name, phone, deletePhoneNumber }) => {\n  return (\n    <li>\n      {name} {phone}\n      <button onClick={deletePhoneNumber}>Delete Phone</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ people, deletePhoneNumber }) => {\n  console.log(people);\n  return (\n    <ul>\n      {people.map((person) => (\n        <Person\n          key={person.name}\n          name={person.name}\n          phone={person.number}\n          deletePhoneNumber={() => deletePhoneNumber(person.id)}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        name:{\" \"}\n        <input value={props.newName} onChange={props.handlePersonChange} />\n        <div>\n          number:{\" \"}\n          <input value={props.newNumber} onChange={props.handleNumberChange} />\n        </div>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst FilterPerson = ({ search, handler }) => {\n  return (\n    <div>\n      Search: <input value={search} onChange={handler} />\n    </div>\n  );\n};\n\nexport default FilterPerson;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, deletePerson };\n","import React from \"react\";\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={type}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport FilterPerson from \"./components/FilterPerson\";\nimport phoneService from \"./services/phones\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setnewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notificationMessage, setnotificationMessage] = useState(\"\");\n  const [notificationtype, setnotificationtype] = useState(\"\");\n  let personsToShow = persons;\n\n  useEffect(() => {\n    phoneService.getAll().then((initialPeople) => {\n      setPersons(initialPeople);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const PersonObject = {\n      name: newName,\n      number: newNumber,\n    };\n    if (persons.filter((e) => e.name === newName).length > 0) {\n      if (window.confirm(`Would you like to edit ${newName}`)) {\n        const person = persons.find((n) => n.name === newName);\n        const changePerson = { ...person, number: newNumber };\n\n        phoneService\n          .update(changePerson.id, changePerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== changePerson.id ? person : returnedPerson\n              )\n            );\n            setnotificationMessage(\n              `${PersonObject.name} had his details updated`\n            );\n            setTimeout(() => {\n              setnotificationMessage(null);\n            }, 5000);\n            setnotificationtype(\"success\");\n          })\n          .catch((error) => {\n            setnotificationMessage(`${error.response.data.error}`);\n            setnotificationtype(\"error\");\n          });\n      }\n    } else {\n      phoneService\n        .create(PersonObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setnewNumber(\"\");\n          setnotificationMessage(\n            `${PersonObject.name} was added to the server`\n          );\n          setTimeout(() => {\n            setnotificationMessage(null);\n          }, 5000);\n          setnotificationtype(\"success\");\n        })\n        .catch((error) => {\n          setnotificationMessage(`${error.response.data.error}`);\n          setnotificationtype(\"error\");\n        });\n    }\n  };\n\n  const deletePhoneNumber = (id) => {\n    if (window.confirm(\"Do you really want to delte the user?\")) {\n      phoneService\n        .deletePerson(id)\n        .then((returnedPerson) => {\n          setPersons(\n            persons.map((note) => (note.id !== id ? note : returnedPerson))\n          );\n        })\n        .catch((error) => {\n          setnotificationMessage(\n            `that person was already removed from the server`\n          );\n          setTimeout(() => {\n            setnotificationMessage(null);\n          }, 5000);\n          setnotificationtype(\"error\");\n          setPersons(persons.filter((n) => n.id !== id));\n        });\n    }\n  };\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setnewNumber(event.target.value);\n  };\n  const handleSearchChange = (event) => {\n    setSearch(event.target.value);\n  };\n  personsToShow = persons.filter((person) => {\n    console.log(persons);\n    if (person.name) {\n      return person.name.toUpperCase().includes(search.toUpperCase());\n    }\n    return null;\n  });\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notificationMessage} type={notificationtype} />\n      <FilterPerson search={search} handler={handleSearchChange} />\n      <h2>Add a new</h2>\n      <PersonForm\n        handlePersonChange={handlePersonChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons people={personsToShow} deletePhoneNumber={deletePhoneNumber} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}